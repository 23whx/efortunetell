# 变更日志

本文档记录了项目的所有重要变更。

## [未发布] - 2024-12-30

### 新增 ✨

- **交互式进程管理系统** ⭐ 重点功能
  - 添加了智能进程清理脚本 (`scripts/dev.js`)
  - **启动时自动检测端口占用，询问用户是否清理**
  - 显示占用端口的进程信息（PID）
  - 用户可选择清理或取消启动
  - 添加了独立的端口清理工具 (`scripts/clean-port.js`)
  - 终端关闭时自动释放进程和端口
  - 支持 Windows、Linux、Mac 多平台

- **友好的用户提示**
  - 启动时显示端口占用解决方案提示框
  - **交互式询问**: 检测到端口占用时询问用户操作
  - 遇到端口冲突时自动显示详细解决步骤
  - 清理脚本提供彩色输出和清晰的状态信息
  - 启动失败时显示可能的解决方案

- **VS Code 集成**
  - 添加了开发任务配置 (`.vscode/tasks.json`)
  - 优化了终端设置 (`.vscode/settings.json`)
  - 支持一键启动开发服务器

### 改进 🔧

- 重构了开发服务器启动流程
- 改进了错误处理和异常捕获
- 优化了进程生命周期管理
- 增强了跨平台兼容性

### 文档 📝

- 更新了项目 README，添加开发环境配置说明
- 创建了 `scripts/README.md`，详细说明脚本使用方法
- 添加了常见问题解答（FAQ）
- 完善了故障排除指南

### 技术细节

#### 信号处理
- 监听 SIGINT (Ctrl+C)
- 监听 SIGTERM (终止信号)
- 监听 SIGHUP (终端断开)
- 监听 SIGBREAK (Windows 特定)

#### 端口管理
- 自动检测端口占用
- 强制终止占用进程
- 验证端口释放状态
- 防止端口冲突

#### 错误处理
- 捕获未处理的异常
- 处理 Promise 拒绝
- 友好的错误消息
- 详细的调试信息

### 使用示例

```bash
# 启动开发服务器（推荐）
npm run dev

# 手动清理端口
npm run clean-port

# 直接启动（不推荐，无进程管理）
npm run dev:direct
```

### 提示信息示例

启动时：
```
┌─────────────────────────────────────────────────────┐
│  💡 提示：如果遇到端口占用问题，可以运行：          │
│     npm run clean-port                              │
└─────────────────────────────────────────────────────┘
```

遇到端口占用：
```
❌ 错误：端口 14761 已被占用！

💡 解决方案：
   1. 运行以下命令清理端口：
      npm run clean-port
   2. 然后重新启动开发服务器：
      npm run dev

   或者直接重新运行 npm run dev（脚本会自动尝试清理）
```

### 已知问题

- Windows 下 Ctrl+C 可能显示"终止批处理操作吗(Y/N)?"提示（正常现象）
- 某些情况下可能需要管理员权限才能终止进程

### 迁移指南

无需特殊迁移步骤，只需：
1. 拉取最新代码
2. 使用 `npm run dev` 启动开发服务器
3. 遇到问题时按照提示操作

---

## 历史版本

### [0.1.0] - 2024-12-01

初始版本发布

- 基础的 Next.js 应用结构
- Supabase 集成
- 用户认证系统
- 文章管理功能
- 多语言支持

---

**说明**：
- 🎉 新增功能
- 🔧 改进优化
- 🐛 Bug 修复
- 📝 文档更新
- ⚠️ 重大变更
- 🗑️ 废弃功能

